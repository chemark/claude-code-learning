# 📚 Claude Code `/resume` 命令完全指南

> 掌握会话恢复，让你的工作流无缝衔接

## 📖 目录

- [1. 基础概念](#1-基础概念)
- [2. 基本用法](#2-基本用法)
- [3. 高级功能](#3-高级功能)
- [4. 实战场景](#4-实战场景)
- [5. 最佳实践](#5-最佳实践)
- [6. 常见问题](#6-常见问题)
- [7. 技巧和窍门](#7-技巧和窍门)

---

## 1. 基础概念

### 什么是 `/resume`？

`/resume` 是 Claude Code 的会话管理命令，允许你：
- 📋 查看所有历史会话
- 🔄 恢复之前的对话上下文
- 🔍 搜索和过滤会话
- 🗂️ 管理多个并行任务

### 为什么需要 `/resume`？

**问题场景**：
```
上午: 开发新功能 A
下午: 紧急修复 Bug B
晚上: 想继续功能 A，但上下文丢失了 😰
```

**解决方案**：
```
晚上: /resume → 选择"开发新功能 A"的会话
     → 完整上下文恢复 ✅
```

---

## 2. 基本用法

### 2.1 打开会话列表

```bash
# 最简单的用法
/resume
```

**显示效果**：
```
Resume Session

> [Image #3][Image #4]图片右边的claude code的提示是什么意思
  3 minutes ago · 65 messages · main

  [Image #1], 解释一下下面的"tips", 新建一个文档来存放claude code...
  3 hours ago · 86 messages · main

  [Image #1], 解释一下下面的"tips", 新建一个文档来存放claude code...
  3 hours ago · 86 messages · main

  [Image #1]我听你的话，重启了
  3 hours ago · 18 messages · main

  Playwright MCP Configuration: Global Setup Clarified
  3 hours ago · 129 messages · main

Esc to exit
```

### 2.2 会话列表信息解读

每个会话条目包含：

| 信息 | 说明 | 示例 |
|------|------|------|
| **标题** | 会话的主要内容 | "解释一下下面的 tips" |
| **时间** | 会话创建时间 | "3 hours ago" |
| **消息数** | 对话轮次 | "86 messages" |
| **分支** | Git 分支 | "main" |
| **标记** | 特殊标识 | ">" 表示当前会话 |

### 2.3 选择和恢复会话

**操作步骤**：
```
1. 输入 /resume
2. 使用方向键 ↑↓ 移动选择
3. 按 Enter 确认恢复
4. 或按 Esc 取消
```

**示例操作**：
```bash
# Step 1: 打开会话列表
/resume

# Step 2: 用方向键移动到想要的会话
↓↓↓  # 向下移动3次

# Step 3: 按 Enter 恢复
Enter

# 输出：
✓ 会话已恢复
✓ 加载了 86 条历史消息
✓ 工作目录: /Users/xingshuhao/learn/claude-code-learning
✓ 分支: main
```

---

## 3. 高级功能

### 3.1 搜索会话

虽然 `/resume` 本身不支持直接搜索参数，但你可以：

**方法 1: 使用 Ctrl+R 搜索历史**
```bash
Ctrl+R
# 输入关键词
tips
# 找到相关的历史命令
```

**方法 2: 会话列表中快速定位**
```bash
/resume
# 列表加载后，快速浏览标题
# 通过时间和标题识别想要的会话
```

**方法 3: 自然语言请求**
```
"显示所有关于 MCP 配置的会话"
"我想继续昨天关于 tips 文档的对话"
```

### 3.2 会话分类

根据你的使用模式，会话通常分为：

**按类型分类**：
```
📝 文档编写类
  - 创建 README
  - 编写 Tips 文档
  - 更新指南

🐛 Bug 修复类
  - 修复生产环境问题
  - 解决编译错误
  - 处理测试失败

✨ 功能开发类
  - 实现新功能
  - 重构代码
  - 优化性能

🔧 配置调试类
  - MCP 配置
  - 环境设置
  - 工具安装
```

### 3.3 会话管理操作

虽然 `/resume` 主要用于恢复会话，但结合其他命令可以完整管理：

```bash
# 查看会话列表
/resume

# 清除当前会话（开始新对话前）
/clear

# 查看完整历史（跨会话）
Esc Esc

# 搜索历史命令
Ctrl+R
```

---

## 4. 实战场景

### 场景 1: 多任务并行工作

**情况**：同时处理多个任务，需要频繁切换

```bash
# 上午 9:00 - 开始功能 A
"开始开发用户认证功能"
[工作 1 小时...]

# 上午 10:00 - 紧急任务插入
/clear
"修复生产环境的登录 bug"
[快速修复 30 分钟...]

# 上午 10:30 - 回到功能 A
/resume
# 选择 "开始开发用户认证功能"
"继续刚才的认证功能开发"
[继续工作...]

# 下午 2:00 - 又有新任务
/clear
"审查同事的 PR #123"
[审查 1 小时...]

# 下午 3:00 - 再次回到功能 A
/resume
# 选择 "开始开发用户认证功能"
"我们做到哪了？继续"
```

**效果**：
- ✅ 每个任务都有独立的上下文
- ✅ 可以随时切换，不会混乱
- ✅ 工作历史清晰可追溯

---

### 场景 2: 跨天续作

**情况**：今天想继续昨天的工作

```bash
# 昨天
"重构 shopping cart 模块"
[工作到晚上 6 点，离开...]

# 今天早上
/resume

# 看到昨天的会话
> 重构 shopping cart 模块
  1 day ago · 45 messages · feature/cart-refactor

# 恢复会话
Enter

# 询问 Claude
"昨天我们讨论到哪了？还有什么需要做的？"

# Claude 回答：
"昨天我们完成了：
1. ✅ 提取 cart 逻辑到独立模块
2. ✅ 添加单元测试
3. ✅ 更新文档

还需要：
1. ⏳ 集成到主应用
2. ⏳ 进行性能测试
3. ⏳ 代码审查"
```

**效果**：
- ✅ 快速回忆昨天的进度
- ✅ 无缝继续工作
- ✅ 不丢失任何上下文

---

### 场景 3: 项目回顾和总结

**情况**：需要回顾整个项目的开发历程

```bash
# 查看所有相关会话
/resume

# 看到项目的完整时间线
Week 1: 项目初始化和架构设计
Week 2: 核心功能开发
Week 3: Bug 修复和优化
Week 4: 测试和文档

# 选择性恢复某个阶段
# 例如：回顾架构设计的讨论
/resume
# 选择 "项目初始化和架构设计"

# 生成项目总结
"基于我们的所有对话，生成一份项目总结报告"
```

**效果**：
- ✅ 完整的项目历史
- ✅ 方便生成文档
- ✅ 团队知识传承

---

### 场景 4: 学习和知识回顾

**情况**：学习新技术，需要回顾之前的讨论

```bash
# 两周前学习 MCP
"帮我学习 MCP 配置"
[学习和实践...]

# 今天遇到问题
/resume
# 找到 "Playwright MCP Configuration"
Enter

# 回顾之前的学习内容
"我之前是怎么配置 MCP 的？"
"当时遇到的问题是什么？"
"最终的解决方案是？"
```

**效果**：
- ✅ 知识不会遗忘
- ✅ 问题解决方案可查
- ✅ 学习笔记自动化

---

## 5. 最佳实践

### 5.1 会话命名策略

**好的命名** ✅：
```
✓ "开发用户认证功能"
✓ "修复生产环境登录 bug"
✓ "重构 shopping cart 模块"
✓ "学习 MCP 集成"
✓ "审查 PR #123"
```

**不好的命名** ❌：
```
✗ "帮我"
✗ "继续"
✗ "这个"
✗ "代码"
```

**命名技巧**：
```
格式: [动作] + [对象] + [可选: 具体内容]

示例:
- "开发 + 认证功能"
- "修复 + 登录 bug"
- "重构 + cart 模块"
- "学习 + MCP 配置"
```

---

### 5.2 会话生命周期管理

**会话开始**：
```bash
# 清晰地说明任务
"我要开始开发新功能：用户个人资料页面"

# 或者使用 /clear 开始全新会话
/clear
"开发用户个人资料页面功能"
```

**会话进行中**：
```bash
# 定期总结进度
"总结一下目前完成了什么"

# 遇到重要决策点时记录
"决定使用 Zustand 作为状态管理，原因是..."
```

**会话结束**：
```bash
# 在会话结束前总结
"总结一下这次会话完成的工作"

# Claude 会总结：
"本次会话完成：
✓ 创建了个人资料页面组件
✓ 实现了表单验证
✓ 添加了单元测试
✓ 更新了文档

待办事项：
⏳ 集成到路由
⏳ 添加 E2E 测试"
```

---

### 5.3 工作流模式

#### 模式 1: 单线程工作流

适合专注单一任务：

```bash
# 一个任务从头到尾
"开发功能 A"
[持续工作，不切换]
"功能 A 完成"

# 开始下一个
/clear
"开发功能 B"
```

**优点**：
- ✅ 专注度高
- ✅ 上下文连贯
- ✅ 效率最高

**缺点**：
- ❌ 不适合多任务场景
- ❌ 遇到阻塞时浪费时间

---

#### 模式 2: 多线程工作流

适合需要并行多个任务：

```bash
# 任务 A
"开发功能 A"
[工作一段时间...]

# 切换到任务 B
/clear
"修复 bug B"
[快速修复...]

# 回到任务 A
/resume
# 选择 "开发功能 A"
[继续工作...]

# 又切换到任务 C
/clear
"审查 PR C"
```

**优点**：
- ✅ 灵活应对各种情况
- ✅ 不会阻塞在一个任务上
- ✅ 可以处理突发任务

**缺点**：
- ❌ 需要更多的上下文切换
- ❌ 可能会分散注意力

---

#### 模式 3: 批处理工作流

适合处理相似的重复任务：

```bash
# 集中处理一批相似任务
"今天要完成 5 个 bug 修复"

# Bug 1
"修复 bug #101"
[完成]

# Bug 2
"修复 bug #102"
[完成]

# Bug 3
"修复 bug #103"
[完成]

# 最后总结
"总结今天修复的所有 bug"
```

**优点**：
- ✅ 效率高
- ✅ 流程标准化
- ✅ 容易追踪进度

**缺点**：
- ❌ 缺乏灵活性
- ❌ 上下文会混在一起

---

### 5.4 会话卫生（Session Hygiene）

**定期清理**：
```bash
# 每周回顾会话列表
/resume
# 识别不再需要的会话
# 记录重要内容后，可以心理上"归档"
```

**上下文重置**：
```bash
# 当上下文变得混乱时
/clear
"总结一下之前的讨论，然后我们重新开始"
```

**会话标记**：
```bash
# 在会话中添加里程碑
"[里程碑] 完成了功能 A 的核心实现"
"[决策点] 决定使用方案 B"
"[阻塞] 等待后端 API 完成"
```

---

## 6. 常见问题

### Q1: 会话恢复后，之前的代码更改还在吗？

**答案**：取决于是否保存

```
✅ 已保存的文件更改 - 会保留
✅ Git 提交的代码 - 会保留
✅ 对话历史和上下文 - 会完整恢复

❌ 未保存的文件更改 - 不会恢复
❌ 后台运行的进程 - 不会恢复
❌ 临时环境变量 - 不会恢复
```

**最佳实践**：
```bash
# 会话结束前
"总结完成的工作，并列出所有修改的文件"
"提交所有更改到 Git"

# 下次恢复时
/resume
# 选择会话
"显示上次会话中修改了哪些文件"
```

---

### Q2: 可以同时打开多个会话吗？

**答案**：可以，但需要技巧

**方法 1: 多个终端窗口**
```bash
# 终端 1
claude
/resume
# 选择会话 A

# 终端 2（新窗口）
claude
/resume
# 选择会话 B
```

**方法 2: 使用 tmux/screen**
```bash
# 创建多个 tmux 窗口
tmux new -s task-a
claude
# 会话 A

# 新窗口
Ctrl+B C
claude
# 会话 B

# 切换窗口
Ctrl+B 0  # 回到会话 A
Ctrl+B 1  # 回到会话 B
```

**注意事项**：
- ⚠️ 多个会话修改同一文件时要小心冲突
- ⚠️ 建议使用不同的 Git 分支
- ⚠️ 保持清晰的任务边界

---

### Q3: 历史会话会永久保存吗？

**答案**：会长期保存，但有限制

**保存机制**：
```
✓ 本地存储在 ~/.claude/sessions/
✓ 跨 Claude Code 重启持久化
✓ 跨设备不同步（本地存储）
```

**存储限制**：
```
⚠️ 可能有数量限制（如 100 个会话）
⚠️ 可能有时间限制（如 30 天）
⚠️ 旧会话可能会被自动清理
```

**建议**：
```bash
# 重要会话内容要导出
"导出这次会话的完整总结"

# 保存到项目文档
"将讨论的架构决策写入 ARCHITECTURE.md"
```

---

### Q4: 如何在会话间共享信息？

**方法 1: 使用记忆系统**
```bash
# 在会话 A 中
#
"记住：项目使用 React + TypeScript"

# 在会话 B 中（新会话）
# Claude 会自动应用记忆
"创建一个新组件"  # 自动使用 TypeScript
```

**方法 2: 使用项目文档**
```bash
# 会话 A 中
"将架构决策写入 DECISIONS.md"

# 会话 B 中
"查看 DECISIONS.md 了解架构决策"
```

**方法 3: 显式引用**
```bash
# 会话 B 中
"我在之前的会话中讨论了用户认证，
现在要实现那个设计"
```

---

### Q5: 会话恢复时性能会变慢吗？

**答案**：长会话可能会影响性能

**问题表现**：
```
⚠️ 超过 100 条消息的会话可能变慢
⚠️ 加载时间增加
⚠️ 响应延迟
```

**解决方案**：

```bash
# 方法 1: 定期重置会话
/resume
# 恢复旧会话
"总结之前的讨论要点"

/clear
"基于刚才的总结，我们继续工作"

# 方法 2: 只恢复关键信息
"我之前讨论了 A、B、C 三个问题，
现在只需要继续 C"

# 方法 3: 分阶段会话
"阶段 1 已完成，开始阶段 2"
# 而不是一个超长会话
```

---

## 7. 技巧和窍门

### 技巧 1: 会话快照

**创建会话快照**：
```bash
# 在关键节点
"生成当前会话的完整总结，
包括：
- 讨论的问题
- 做出的决策
- 完成的工作
- 待办事项
- 重要代码片段"

# 保存到文件
"将总结保存到 SESSION_SNAPSHOT.md"
```

**使用场景**：
- 项目里程碑
- 长时间中断前
- 团队交接
- 个人回顾

---

### 技巧 2: 会话标签系统

**在会话中使用标签**：
```bash
# 使用特殊标记
"[BUG-FIX] 修复登录问题"
"[FEATURE] 开发用户配置"
"[REFACTOR] 重构数据层"
"[DOCS] 更新 API 文档"
"[RESEARCH] 调研新框架"

# 后续搜索时更容易找到
/resume
# 看到分类清晰的会话列表
```

---

### 技巧 3: 会话模板

**创建常用会话模板**：

**Bug 修复模板**：
```markdown
## Bug 修复会话

### 问题描述
[描述 bug]

### 重现步骤
1. ...
2. ...

### 预期行为
[描述预期]

### 实际行为
[描述实际]

### 解决方案
[讨论和实现]

### 验证
[测试确认]
```

**功能开发模板**：
```markdown
## 功能开发会话

### 功能需求
[描述需求]

### 技术方案
[讨论方案]

### 实现步骤
1. ...
2. ...

### 测试计划
[测试策略]

### 文档更新
[文档变更]
```

**使用方式**：
```bash
# 开始新会话时
"按照 Bug 修复模板，
开始处理 #123 bug"
```

---

### 技巧 4: 会话链接

**在会话间建立关联**：
```bash
# 会话 A
"[相关会话] 这个问题在之前的
'MCP 配置'会话中讨论过"

# 会话 B
"[续] 继续'开发认证功能'的工作"

# 会话 C
"[依赖] 等待'后端 API'会话完成"
```

**效果**：
- ✅ 建立会话间的关系网
- ✅ 方便追溯问题来源
- ✅ 理解工作的前后依赖

---

### 技巧 5: 晨会回顾

**每天早上的工作流**：
```bash
# 1. 查看昨天的会话
/resume

# 2. 识别未完成的工作
Esc Esc
# 浏览昨天的对话

# 3. 恢复最重要的会话
/resume
# 选择主要任务

# 4. 快速回顾
"昨天我们完成了什么？今天要做什么？"

# 5. 制定今天的计划
"今天的工作计划：
1. 完成昨天的 XXX
2. 开始新的 YYY
3. 审查 ZZZ"
```

---

### 技巧 6: 周末回顾

**每周五下班前**：
```bash
# 1. 回顾本周所有会话
/resume

# 2. 生成周报
"基于本周的所有会话，
生成工作周报，包括：
- 完成的任务
- 遇到的问题
- 学到的知识
- 下周计划"

# 3. 保存重要决策
"将本周的重要技术决策
记录到 DECISIONS.md"

# 4. 清理上下文
/clear
"准备好开始新的一周"
```

---

## 📚 相关资源

- 📖 [Claude Code 官方文档](https://docs.claude.com/en/docs/claude-code/)
- 🎯 [完整 Tips 文档](./CLAUDE_CODE_TIPS.md)
- 🚀 [快速开始指南](./QUICK_START.md)
- 🔧 [故障排查](./TROUBLESHOOTING.md)

---

## 🎯 快速参考卡

```
┌─────────────────────────────────────────────┐
│  /resume 命令速查                            │
├─────────────────────────────────────────────┤
│                                              │
│  打开会话列表:     /resume                  │
│  选择会话:         ↑↓ + Enter               │
│  退出:             Esc                       │
│                                              │
│  会话管理:                                   │
│  - 清除当前:       /clear                    │
│  - 查看历史:       Esc Esc                   │
│  - 搜索历史:       Ctrl+R                    │
│                                              │
│  最佳实践:                                   │
│  ✓ 清晰的会话命名                            │
│  ✓ 定期总结进度                              │
│  ✓ 重要内容保存到文件                        │
│  ✓ 使用记忆系统共享信息                      │
│                                              │
└─────────────────────────────────────────────┘
```

---

## ✨ 总结

`/resume` 命令是 Claude Code 强大的会话管理工具，掌握它可以：

✅ **提高效率** - 快速切换任务，无缝恢复上下文
✅ **管理复杂度** - 并行处理多个任务不会混乱
✅ **知识保留** - 对话历史成为可搜索的知识库
✅ **团队协作** - 清晰的工作历史便于交流
✅ **持续学习** - 所有讨论都是宝贵的学习资料

现在就开始使用 `/resume`，让你的工作流更加高效！🚀

---

<div align="center">
  <sub>💡 Tip: 养成使用 /resume 的习惯，你的工作效率会显著提升</sub>
</div>
